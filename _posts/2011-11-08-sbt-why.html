---
layout: post
title: 'sbt: why?!'
date: '2011-11-08T10:27:00.001-05:00'
author: Leonid Dubinsky
tags:
- scala
- maven
- sbt
modified_time: '2012-10-26T11:53:32.963-04:00'
blogger_id: tag:blogger.com,1999:blog-8681083740214020499.post-3816181683279598138
blogger_orig_url: https://blog.dub.podval.org/2011/11/sbt-why.html
---

There exists a very popular build tool: <a href="http://maven.apache.org/">Maven</a>. Even I use it. It has advantages:<br />
<br />
<ul>
<li>There are plugins for everything!</li>
<li>There is a lot of information and&nbsp;knowledgeable people!</li>
<li>It integrates well with the IDEs!</li>
</ul>
<a href="https://github.com/harrah">Mark Harrah</a> created a build tool especially for <a href="http://www.scala-lang.org/">Scala</a>: <a href="https://github.com/harrah/xsbt">sbt</a> (simple build tool). It has its own advantages:<br />
<br />
<ul>
<li>It is configured in Scala (a little less with 0.10, but still kinda). This is shorter and more powerful than Maven's XML.</li>
<li>It supports continuous compilation.</li>
<li>It supports continuous testing.</li>
</ul>
<div>
To gain advantages of sbt, one has to abandon Maven completely, and loose all its advantages. For legacy projects, Maven POM has to be ported to sbt, which is likely non-trivial, and not always even possible. Is the pain worth the gain?</div>
<div>
<br /></div>
<div>
<i>Shorter configuration.</i></div>
<div>
<br /></div>
<div>
I do not want to have to rewrite all my POMs for sbt so that they become shorter; I can deal with them the way they are.</div>
<div>
<br /></div>
<div>
Even for new projects, I'd rather write a POM and not a sbt configuration: I can then use existing Maven plugins instead trying to find, write or&nbsp;commission&nbsp;an sbt one.</div>
<div>
<br /></div>
<div>
Also, <a href="http://polyglot.sonatype.org/">Polyglot Maven</a> seems to <a href="http://polyglot.sonatype.org/scala.html">support Scala</a>.</div>
<div>
<br /></div>
<div>
<i>More powerful configuration.</i></div>
<div>
<br /></div>
<div>
I think Maven 3 will bring more power, but I am happy with the power of Maven 2. I do not need my build system to be Turing-complete.</div>
<div>
<br /></div>
<div>
Mark Harrah himself said that super-powerful settings mechanisms of sbt are not the goal of the project. The goal is to handle quick, continuous compilation.</div>
<div>
<br /></div>
<div>
<i>Continuous compilation.</i></div>
<div>
<br /></div>
<div>
It is nice to get feedback on errors immediately. But I get it in my IDE (<a href="http://netbeans.org/">NetB<span id="goog_713821829"></span><span id="goog_713821830"></span>eans</a> with Scala <a href="https://github.com/dcaoyuan/nbscala">plugin</a>) already!</div>
<div>
<br /></div>
<div>
It would be nice to make the build time shorter. Scala distribution provides compiler as a server for this purpose (I do not know how to use it from within my IDE)...</div>
<div>
<br /></div>
<div>
It would be nice to make deployment time shorter for web applications. But sbt does not do it. One has to use frameworks like <a href="http://www.playframework.org/">Play</a> and products like <a href="http://zeroturnaround.com/jrebel/">JRebel</a> for that - which can be done with or without sbt!</div>
<div>
<i><br />
</i></div>
<div>
I am not (yet?) into <a href="http://en.wikipedia.org/wiki/Test-driven_development">Test Driven Development</a>, so I do not miss continuous testing :)</div>
<div>
<br /></div>
<div>
Also, <a href="http://scala-tools.org/mvnsites/maven-scala-plugin/">Scala plugin for Maven</a>&nbsp;supports continuous compilation and testing. Is sbt's support any better?&nbsp;<span style="background-color: transparent;">I heard from a&nbsp;</span><span style="background-color: transparent;">colleague that sbt supports multi-project continuous compilation and Maven plugin does not.</span><span style="background-color: transparent;">&nbsp;</span><span style="background-color: transparent;">Can the plugin's be improved?</span></div>
<div>
<br /></div>
<div>
It seems logical that features needed for continuous/incremental compilation should be packaged in the Scala compiler itself. Indeed, according to Mark, incremental compilation feature that was present in the Scala compiler is based on early versions of his sbt work. With advances in sbt that code rotted, and the feature has been removed!</div>
<div>
<br /></div>
<div>
I think that was a step in the wrong direction.</div>
<div>
<br /></div>
<div>
<a href="http://typesafe.com/" style="background-color: transparent;">Typesafe</a><span style="background-color: transparent;">&nbsp;(the Scala company) seems to be pushing sbt: it is part of the Typesafe </span><a href="http://typesafe.com/stack" style="background-color: transparent;">Stack</a><span style="background-color: transparent;">. When I asked about Maven compatibility, I was told than Typesafe "is not a Maven company", and that I should search among sbt plugins written by the community.</span></div>
<br />
As is clear from the above, I am not ready to abandon Maven for sbt. And I am sure I am not alone in that.<br />
<br />
I think that Typesafe should refine its Maven story. You can't just say "we are not a Maven company" if you are trying to penetrate enterprise market, where Maven is entrenched.<br />
<span style="background-color: transparent;"><br />
</span><br />
<span style="background-color: transparent;">Advantages of sbt should be available in Maven-based builds.&nbsp;</span><span style="background-color: transparent;">Writing a POM with sbt's "make-pom" does not cut it. Can sbt </span><i style="background-color: transparent;">read</i><span style="background-color: transparent;">&nbsp;the POM? Even in the presence of additional setting tweaks </span><i style="background-color: transparent;">in</i><span style="background-color: transparent;"> sbt?</span><br />
<br />
Can sbt be <i>packaged</i> as a Maven plugin? Or, existing Maven Scala plugin enhanced?<br />
<br />
Can continuous compilation support be moved (back) into Scala compiler? Continuous compilation could then be used by multiple tools, including Maven, and we all will be happier :)<br />
<br />
<b>Update October 2012:</b>&nbsp;It seems that I am <a href="http://comments.gmane.org/gmane.comp.lang.scala.user/57137">not the only one</a> not drinking the sbt Kool-Aid. It also seems that Typesafe got at least part of the message: they made <a href="https://github.com/typesafehub/zinc">Zinc</a>, a stand-alone version of the sbt's incremental compiler, and <a href="https://github.com/davidB/scala-maven-plugin">scala-maven-plugin</a> supports it!